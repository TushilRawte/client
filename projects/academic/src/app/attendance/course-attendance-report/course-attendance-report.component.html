<mat-card class="attendance-main">
    <mat-card-content>
        <h3 class="fw-bold page-title mb-4">Course Attendance Report</h3>
        <form [formGroup]="courseAttendanceReportFormGroup">
            <div formGroupName="selection" class="row">
                <div class="col-md-4 col-12">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Session</mat-label>
                        <mat-select placeholder="Session" formControlName="academic_session_id">
                            <mat-option *ngFor="let server of state.acadmcSesnList"
                                [value]="server.academic_session_id">
                                {{ server.academic_session_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-4 col-12">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Semester</mat-label>
                        <mat-select placeholder="Semester" formControlName="semester_id">
                            <mat-option *ngFor="let semester of state.semesterList" [value]="semester.semester_id">
                                {{ semester.semester_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-4 col-12">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Degree Programme Type</mat-label>
                        <mat-select placeholder="Degree Programme Type" formControlName="degree_programme_type_id">
                            <mat-option *ngFor="let degreeProgramme of state.degreeProgrammeTypeList"
                                [value]="degreeProgramme.degree_programme_type_id">
                                {{ degreeProgramme.degree_programme_type_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-12 col-12">
                    <ng-select placeholder="College Name" formControlName="college_id" appearance="outline">
                        <ng-container *ngFor="let college of state.collegeList">
                            <ng-option [value]="college.college_id">
                                {{ college.college_name_e}}
                            </ng-option>
                        </ng-container>
                    </ng-select>
                </div>

                <div class="col-12 mt-md-3 d-flex justify-content-center">
                    <div>
                        <button mat-raised-button color="primary" (click)="getDetails_click()">
                            Get Details
                        </button>
                    </div>
                </div>

            </div>
        </form>
    </mat-card-content>
</mat-card>

<div *ngIf="state.matrixList && state.matrixList.length > 0" class="mt-3 mb-3">
    <app-reporttable [options]="matrixTableOptions">
        <ng-template #headerTemplate>
            <tr>
                <th>S.No.</th>
                <th>Course Year</th>
                <th>Exam Type</th>
                <th>Course Nature</th>
                <th>Dean Committee</th>
                <th class="d-print-none">Get Courses</th>
            </tr>
        </ng-template>
        <ng-template #rowTemplate let-row let-i="index">
            <tr>
                <td [ngClass]="{'bg-green': isRowSelected(row)}">{{i+1}}</td>
                <td [ngClass]="{'bg-green': isRowSelected(row)}">{{ row.course_year_name_e }}</td>
                <td [ngClass]="{'bg-green': isRowSelected(row)}">{{ row.exam_type_name_e }}</td>
                <td [ngClass]="{'bg-green': isRowSelected(row)}">{{ row.course_nature_name_e }}</td>
                <td [ngClass]="{'bg-green': isRowSelected(row)}">{{ row.dean_committee_name_e }}</td>
                <td class="d-print-none cursor-pointer" [ngClass]="{'bg-green': isRowSelected(row)}">
                    <mat-icon (click)="getCourses_btn(row)" class="text-success">
                        assignment
                    </mat-icon>
                </td>
            </tr>
        </ng-template>
    </app-reporttable>
</div>

<mat-card *ngIf="state.courseList && state.courseList.length > 0">
    <div *ngIf="state.courseList && state.courseList.length > 0" class="mt-3 bg-white">
        <app-reporttable [options]="courseListOption">
            <ng-template #headerTemplate>
                <tr>
                    <th>S.No.</th>
                    <th class="text-start">Course Name</th>
                    <th class="d-print-none">Get Reports</th>
                </tr>
            </ng-template>
            <ng-template #rowTemplate let-row let-i="index">
                <tr>
                    <!-- <td>{{ (options?.page * options?.pageSize) + i + 1 }}</td> -->
                    <td [ngClass]="{'bg-green': isRowSelectedCourse(row)}">{{i + 1}} </td>
                    <td class="text-start" [ngClass]="{'bg-green': isRowSelectedCourse(row)}">{{ row.course_name }}</td>
                    <th class="d-print-none cursor-pointer" [ngClass]="{'bg-green': isRowSelectedCourse(row)}">
                        <mat-icon (click)="getPdfReport_btn(row)" class="text-danger">
                            picture_as_pdf
                        </mat-icon>
                    </th>
                </tr>
            </ng-template>
        </app-reporttable>
    </div>
</mat-card>