<mat-card class="attendance-main">
    <mat-card-content>
        <h3 class="fw-bold page-title mb-4">Registration Report</h3>
        <form [formGroup]="registeredReportFormGroup">
            <div formGroupName="selection" class="row">
                <div class="col-md-4 col-6">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Session</mat-label>
                        <mat-select placeholder="Session" formControlName="academic_session_id">
                            <mat-option *ngFor="let server of state.acadmcSesnList"
                                [value]="server.academic_session_id">
                                {{ server.academic_session_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                
                <div class="col-md-4 col-6">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Semester</mat-label>
                        <mat-select placeholder="Semester" formControlName="semester_id">
                            <mat-option *ngFor="let semester of state.semesterList" [value]="semester.semester_id">
                                {{ semester.semester_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-4 col-12">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Degree Programme Type</mat-label>
                        <mat-select placeholder="Degree Programme Type" formControlName="degree_programme_type_id">
                            <mat-option *ngFor="let degreeProgrammeType of state.degreeProgrammeTypeList"
                                [value]="degreeProgrammeType.degree_programme_type_id">
                                {{ degreeProgrammeType.degree_programme_type_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-6 col-12">
                    <ng-select placeholder="College Name" formControlName="college_id" appearance="outline">
                        <ng-container *ngFor="let college of state.collegeList">
                            <ng-option [value]="college.college_id">
                                {{ college.college_name_e}}
                            </ng-option>
                        </ng-container>
                    </ng-select>
                </div>

                <div class="col-md-6 col-12">
                    <mat-form-field appearance="outline" class="w-100">
                        <mat-label>Degree Programme</mat-label>
                        <mat-select placeholder="Degree Programme" formControlName="degree_programme_id">
                            <mat-option *ngFor="let degreeProgramme of state.degreeProgrammeList"
                                [value]="degreeProgramme.degree_programme_id">
                                {{ degreeProgramme.degree_programme_name_e }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-12 mt-md-3 d-flex justify-content-center gap-2 gap-md-4">
                    <button mat-raised-button
                        [ngClass]="activeReportType === 'fee' ? 'active-button' : 'inactive-button'"
                        (click)="getDetails_click('fee')">
                        Registration Fee Status
                    </button>

                    <button mat-raised-button
                        [ngClass]="activeReportType === 'course' ? 'active-button' : 'inactive-button'"
                        (click)="getDetails_click('course')">
                        Registered Courses
                    </button>
                </div>

            </div>
        </form>
    </mat-card-content>
</mat-card>

<div *ngIf="state.matrixListFee && state.matrixListFee.length > 0" class="mt-3 mb-3">
    <app-reporttable [options]="matrixFeeTableOptions">
        <ng-template #headerTemplate>
            <tr>
                <th>S.No.</th>
                <th>Course Year</th>
                <th>Dean Committee</th>
                <th class="d-print-none">Get Report</th>
            </tr>
        </ng-template>
        <ng-template #rowTemplate let-row let-i="index">
            <tr>
                <td>{{i+1}}</td>
                <td>{{ row.course_year_name_e }}</td>
                <td>{{ row.dean_committee_name_e }}</td>
                <td class="d-print-none cursor-pointer">
                    <mat-icon (click)="getRegFeeReport_btn(row)" class="text-danger">
                        picture_as_pdf
                    </mat-icon>
                </td>
            </tr>
        </ng-template>
    </app-reporttable>
</div>

<div *ngIf="state.matrixListCourse && state.matrixListCourse.length > 0" class="mt-3 mb-3">
    <app-reporttable [options]="matrixCourseTableOptions">
        <ng-template #headerTemplate>
            <tr>
                <th>S.No.</th>
                <th>Course Year</th>
                <th>Dean Committee</th>
                <th class="d-print-none">Get Report</th>
            </tr>
        </ng-template>
        <ng-template #rowTemplate let-row let-i="index">
            <tr>
                <td>{{i+1}}</td>
                <td>{{ row.course_year_name_e }}</td>
                <td>{{ row.dean_committee_name_e }}</td>
                <td class="d-print-none cursor-pointer">
                    <mat-icon (click)="getRegCourseReport_btn(row)" class="text-danger">
                        picture_as_pdf
                    </mat-icon>
                </td>
            </tr>
        </ng-template>
    </app-reporttable>
</div>



<!-- -------------------- for printing purpose student registered report -------------------- -->
<mat-card #print_content style="display: none;" *ngIf="state.StudentRegsiteredList.length > 0">
    <div id="print-section-fee" style="font-family: Arial, sans-serif; text-align: center;">
        <table class="table table-bordered" #table>
            <thead class="table-light sticky-top">
                <tr>
                    <th>SNo.</th>
                    <th>Registration ID</th>
                    <th>UE ID</th>
                    <th class="text-start">Student Name</th>
                    <th>Basic Category</th>
                    <th>Academic Status</th>
                    <th>Registration Date</th>
                    <th>Course Registration Status</th>
                    <th>Registration Fee</th>
                    <th>Continous Fee</th>
                    <th>Exam Fee</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let student of state.StudentRegsiteredList; let i = index">
                    <td>{{i+1}}</td>
                    <td>{{student?.registration_id}}</td>
                    <td>{{student?.ue_id}}</td>
                    <td class="text-start">{{student?.student_name}}</td>
                    <td></td>
                    <td>{{student?.stu_acad_status_name_e}}</td>
                    <td>{{ student?.registration_date | date: 'dd-MM-yyyy' }}</td>
                    <td>{{student?.registration_status_id === 1 ? 'Yes' : ''}}</td>
                    <td>{{student?.purpose_id === 1 ? 'Paid' : ''}}</td>
                    <td>{{student?.purpose_id === 1 ? 'Paid' : ''}}</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </div>
</mat-card>