
<form [formGroup]="courseRegistrationForm" (ngSubmit)="onSubmit()">
  <div class="header">
    <!-- <h2>Course Registration</h2> -->
  </div>
 
<mat-card class="basic-details-card">
  <mat-card-content>
    <div class="card-header-custom">
      <mat-card-title>Basic Details</mat-card-title>
    </div>

    <div class="details-grid">
      <div class="detail-item">
        <label class="detail-label">Session:</label>
        <div class="detail-value">{{ academicSessions[0].value }}</div>      
      </div>
      
      <div class="detail-item">
        <label class="detail-label">Year:</label>
         <div class="detail-value">{{ year[0].value }}</div>
      </div>
      
      <div class="detail-item">
        <label class="detail-label">Semester:</label>
         <div class="detail-value">{{ semester[0].value }}</div>
      </div>
      
      <div class="detail-item">
        <label class="detail-label">Academic Standing:</label>
         <div class="detail-value">{{ academicStanding[0].value }}</div>
      </div>

      <div class="detail-item">
        <label class="detail-label">College:</label>
         <div class="detail-value">{{ collges[0].value }}</div>
      </div>
      
      <div class="detail-item">
        <label class="detail-label">Degree Programme:</label>
         <div class="detail-value">{{ academicDegreeProgram[0].value }}</div>
      </div>
      
      <div class="detail-item">
        <label class="detail-label">Dean Committee:</label>
         <div class="detail-value">{{ deanCommittee[0].value }}</div>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<mat-card class="mt-3">
  <mat-card-content>
 

    <div class="course-list">
      <div class="row">

        <!-- Left column: Available Courses -->
        <div class="col-md-6 section">
          <h5>Major Courses (optional)</h5>

           <table class="table table-bordered" >
                    <thead class="table-header">
                        <tr>
                            <th>#</th>
                            <th>Course Title</th>
                            <th>Type</th>
                            <th>Nature</th>
                            <th>Add</th>
                        </tr>
                    </thead>
                    <tbody id="availableCoursesTable">
                        <tr *ngFor="let course of courseListForReg; let i = index">
                            <td>{{ i + 1 }}</td>
                             <td>{{ course.course_name }}</td>
                              <td>{{ course.course_type_name_e }}</td>
                               <td>{{ course.course_nature_name_e}}</td>
                            <td>
                                <button type="button"  color="primary" class=" btn-add"
                                        (click)="selectCourse(course)">
                                    <mat-icon>add</mat-icon> 
                                </button>
                                
                            </td>
                        </tr>
                       
                    </tbody>
            </table>

            <h5>Other Courses</h5>
                  
<div class="table-container">
  <table class="table table-bordered">
      <thead class="table-header">
      <tr>
        <th>#</th>
        <th>Code</th>
        <th>Course Title</th>
        <th>Type</th>
        <th>Nature</th>
        <th>Add</th>
      </tr>
    </thead>
    <tbody id="availableCoursesTable">
      <tr *ngFor="let course of otherDeptcourseListForReg; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ course.course_code }}</td>
        <td>{{ course.course_title_e }}</td>
        <td>{{ course.course_type_name_e }}</td>
        <td>{{ course.course_nature_name_e}}</td>
        <td>
          <button type="button" color="primary" class="btn-add" (click)="selectCourse(course)">
            <mat-icon>add</mat-icon>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

        </div>
        <!-- Right column: Selected Courses -->
        <div class="col-md-6 section">
    <h5>Selected Courses</h5>
    
    <table class="table table-bordered">
        <thead class="table-header">
            <tr>
                <th>#</th>
                  <th>Course Title</th>
                <th>Type</th>
                <th>Nature</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody id="selectedCoursesTable">
            <tr *ngFor="let course of selectedCourses; let i = index" 
                [class.highlighted-row]="!isFailedCourse(course)"
                [class.failed-course-row]="isFailedCourse(course)">
                
                <td>{{ i + 1 }}</td>
                <td>{{ course.course_name }}</td>
                <td>{{ course.course_type_name_e }}</td>
                <td>{{ course.course_nature_name_e }}</td>
                
                <td>
                    <button type="button" 
                            color="danger" 
                            class="btn-remove"
                            [class.failed-course-remove]="isFailedCourse(course)"
                            [disabled]="isFailedCourse(course)"
                            (click)="removeCourse(course.course_id, course.course_nature_id)"
                            [title]="isFailedCourse(course) ? 'Failed courses are mandatory and cannot be removed' : 'Remove Course'">
                        <mat-icon>{{ isFailedCourse(course) ? 'lock' : 'close' }}</mat-icon> 
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
    
    <!-- Legend for color coding -->
    <div class="course-legend mt-3">
        <small class="text-muted">
            <span class="legend-item">
                <span class="legend-color normal-course"></span>
                Normal Courses
            </span>
            <span class="legend-item ml-3" style="padding-left: 5px;">
                <span class="legend-color failed-course"></span>
                Failed Courses (Auto-selected)
            </span>
        </small>
    </div>
</div>

        <!-- <div class="col-md-6 section">
          <h5>Selected Courses</h5>
            
             <table class="table table-bordered" >
                    <thead class="table-header">
                        <tr>
                            <th>#</th>
                            <th>Code</th>
                            <th>Course Title</th>
                            <th>Type</th>
                            <th>Nature</th>
                            <th>Remove</th>
                        </tr>
                    </thead>
                    <tbody id="availableCoursesTable">
                        <tr *ngFor="let course of selectedCourses; let i = index" class="highlighted-row" style="background-color: #f0f8ff;">
                             <td>{{ i + 1 }}</td>
                            <td>{{ course.course_code }}</td>
                             <td>{{ course.course_title_e }}</td>
                              <td>{{ course.course_type_name_e }}</td>
                                   <td>{{ course.course_nature_name_e}}</td>
                            <td>
                                <button type="button" color="danger" class="btn-remove"
                                (click)="removeCourse(course.course_id, course.course_nature_id)">
                                <mat-icon>close</mat-icon> 
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
        </div> -->
      </div>
    </div>
    <hr>
 <button  mat-raised-button color="primary" type="submit">Submit</button>  
  <!-- <button *ngIf="isRegistrationAllowed" mat-raised-button color="primary" type="button">Update</button>  -->
   <button (click)="onUpdate()" mat-raised-button color="primary" type="button">Update</button>
</mat-card-content>
</mat-card>
</form>

